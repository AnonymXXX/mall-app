(function(t){function e(e){for(var i,o,r=e[0],c=e[1],d=e[2],l=0,h=[];l<r.length;l++)o=r[l],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,d||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},n={app:0},a=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"04c5":function(t,e,s){"use strict";s("313a")},2145:function(t,e,s){},2395:function(t,e,s){},"313a":function(t,e,s){},"33e0":function(t,e,s){},"47c2":function(t,e,s){"use strict";s("9050")},5513:function(t,e,s){"use strict";s("33e0")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),n=s("b970"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},o=[],r={},c=r,d=(s("7c55"),s("2877")),u=Object(d["a"])(c,a,o,!1,null,null,null),l=u.exports,h=s("8c4f"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("router-view"),s("TabBar")],1)},m=[],g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-bar-wrapper"},[s("van-tabbar",{attrs:{route:"",fixed:""}},[s("van-tabbar-item",{attrs:{icon:"home-o",to:"/home"}},[t._v("首页")]),s("van-tabbar-item",{attrs:{icon:"apps-o",to:"/home/classify"}},[t._v("分类")]),s("van-tabbar-item",{attrs:{badge:t.carNum?t.carNum:0,icon:"cart-o",to:"/home/shopping"}},[t._v("购物车")]),s("van-tabbar-item",{attrs:{icon:"user-o",to:"/my"}},[t._v("我的")])],1)],1)},f=[],v=(s("13d5"),s("07ac"),s("5530")),b=s("2f62"),y={computed:Object(v["a"])(Object(v["a"])({},Object(b["d"])(["addedProdItem"])),{},{carNum:function(){if(Object.values(this.addedProdItem).length>0)return Object.values(this.addedProdItem).reduce((function(t,e){return t+e>99?"99+":t+e}))}})},L=y,j=Object(d["a"])(L,g,f,!1,null,null,null),_=j.exports,C={components:{TabBar:_}},w=C,S=Object(d["a"])(w,p,m,!1,null,null,null),I=S.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"classify-wrapper"},[s("router-link",{staticClass:"search-box",attrs:{tag:"div",to:"/search"}},[s("van-icon",{attrs:{name:"search"}}),s("span",{staticClass:"search-title"},[t._v("桔子特价20元一斤")])],1),s("OneTab"),t.showContent?[s("SideTab"),s("GoodsList")]:s("van-loading",{attrs:{color:"#1989fa",size:"1rem",vertical:""}})],2)},k=[],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"oneTab",staticClass:"one-tab-wrapper"},t._l(t.menuList,(function(e,i){return s("div",{key:e.title,staticClass:"item",class:{active:i===t.index},on:{touchend:function(e){return t.scrollTo(i,e)},touchstart:function(e){t.move=!1},touchmove:function(e){t.move=!0}}},[s("div",{staticClass:"img-box "},[s("img",{attrs:{src:e.imgURL}})]),s("span",{staticClass:"title"},[t._v(t._s(e.title))])])})),0)},R=[];s("d3b7"),s("25f0");function x(t,e,s,i){var n=0,a=6;e<0&&(a=-a);var o=setInterval((function(){n+=a,s[i]=t+n,Math.abs(n)>Math.abs(e)&&(s[i]=t+e,clearInterval(o))}),2)}function G(){return Date.now()+Math.random().toString(16).substr(5,10)}var T={data:function(){return{move:!1,index:0,menuList:[{title:"时令水果",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/时令水果.jpg"},{title:"酒水冲调",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/酒水冲调.jpg"},{title:"安心乳品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/安心乳品.jpg"},{title:"休闲零食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/休闲零食.jpg"},{title:"肉蛋食材",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/肉蛋食材.jpg"},{title:"新鲜蔬菜",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/新鲜食材.jpg"},{title:"熟食餐饮",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/熟食餐饮.jpg"},{title:"海鲜水产",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/海鲜水产.jpg"},{title:"粮油调味",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/粮油调味.jpg"},{title:"某手美食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/某手美食.jpg"},{title:"纸杯清洁",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/纸品清洁.jpg"},{title:"个人护理",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/个人护理.jpg"},{title:"美妆护肤",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/美妆护肤.jpg"},{title:"家居收纳",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家居收纳.jpg"},{title:"家用电器",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家用电器.jpg"},{title:"3C数码",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/3C数码.jpg"},{title:"母婴用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/母婴用品.jpg"},{title:"鲜花绿植",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/鲜花绿植.jpg"},{title:"宠物用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/宠物用品.jpg"},{title:"图书玩具",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/图书文具.jpg"},{title:"手表配饰",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/手表配饰.jpg"}]}},methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["getSideList"])),{},{scrollTo:function(t,e){if(!this.move){this.index=t;var s=this.$refs.oneTab,i=s.offsetWidth,n=e.currentTarget.getBoundingClientRect().left,a=e.currentTarget.offsetWidth;x(s.scrollLeft,a/2+n-i/2,s,"scrollLeft"),this.getSideList(this.menuList[t].title)}}}),mounted:function(){this.getSideList(this.menuList[0].title)}},$=T,U=(s("74c7"),Object(d["a"])($,P,R,!1,null,"649c858c",null)),E=U.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"sideBar",staticClass:"side-tab-wrapper"},t._l(t.sideList,(function(e,i){return s("div",{key:e,class:{active:i===t.index},on:{touchend:function(e){return t.scrollTo(i,e)},touchstart:function(e){t.move=!1},touchmove:function(e){t.move=!0}}},[t._v(" "+t._s(0===i?"全部":e)+" ")])})),0)},H=[],N={data:function(){return{move:!1,index:0}},computed:Object(v["a"])({},Object(b["d"])(["sideList"])),methods:Object(v["a"])(Object(v["a"])(Object(v["a"])({},Object(b["c"])(["resetGoodsList"])),Object(b["b"])(["getGoodsList"])),{},{scrollTo:function(t,e){if(!this.move){this.index=t;var s=this.$refs.sideBar,i=s.offsetHeight,n=s.getBoundingClientRect().top,a=e.currentTarget.offsetHeight,o=e.currentTarget.getBoundingClientRect().top;x(s.scrollTop,a/2+o-i/2-n,s,"scrollTop"),this.resetGoodsList(),this.getGoodsList({type:this.sideList[t],page:1,size:5,sort:"all"})}}}),mounted:function(){this.resetGoodsList(),this.getGoodsList({type:this.sideList[0],page:1,size:5,sort:"all"})}},z=N,B=(s("942b"),Object(d["a"])(z,M,H,!1,null,"d4ac4d76",null)),A=B.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods-wrapper"},[s("div",{staticClass:"goods-header"},[s("ul",{staticClass:"filter-nav"},[s("li",{class:{active:"all"===t.type},on:{touchend:function(e){return t.changeType("all")}}},[t._v("综合")]),s("li",{class:{active:"sale"===t.type},on:{touchend:function(e){return t.changeType("sale")}}},[t._v(" 销量 ")]),s("li",{staticClass:"price",class:{"price-up":"price-up"===t.type,"price-down":"price-down"===t.type},on:{touchend:function(e){return t.changeType("price")}}},[t._v(" 价格 ")])])]),s("div",{staticClass:"goods-content"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-list",{staticClass:"goods-list-item",attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.goodsList,(function(e,i){return s("GoodsCard",t._b({key:t.id+i},"GoodsCard",e,!1))})),1)],1)],1)])},D=[],F=(s("96cf"),s("1da1")),W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-wrapper"},[s("div",{staticClass:"item"},[s("div",{staticClass:"img-box"},[s("a",{attrs:{href:"#"}},[s("img",{staticStyle:{color:"#333"},attrs:{src:t.images[0],title:"照片无法显示"}})])]),s("div",{staticClass:"content"},[s("span",{staticClass:"title overflow-hidden"},[t._v(t._s(t.title))]),s("span",{staticClass:"desc overflow-hidden"},[t._v(t._s(t.desc))]),s("div",{staticClass:"tags"},t._l(t.tags,(function(e){return s("span",{key:e},[t._v(t._s(e))])})),0),s("div",{staticClass:"card-bottom"},[s("span",{staticClass:"price"},[t._v("￥"+t._s(t.price))]),s("div",{staticClass:"counter"},[t.addedProdItem[t.id]>0?s("i",{staticClass:"minus",on:{touchend:function(e){return e.preventDefault(),t.changeNum(t.id,-1)}}}):t._e(),t.addedProdItem[t.id]>0?s("span",{staticClass:"num"},[t._v(t._s(t.addedProdItem[t.id]))]):t._e(),s("i",{staticClass:"add",on:{touchend:function(e){return t.changeNum(t.id,1)}}})])])])])])},V=[],q={computed:Object(v["a"])({},Object(b["d"])(["addedProdItem"])),methods:{changeNum:function(t,e){if("shopping"===this.typePage){if(1===this.addedProdItem[t]&&-1===e)return void this.$emit("isRemove",t);this.$store.dispatch("setAddedProdItem",{id:t,value:e})}else this.$store.dispatch("setAddedProdItem",{id:t,value:e})}},props:["price","images","desc","tags","title","id","typePage"]},K=q,Q=(s("edc2"),Object(d["a"])(K,W,V,!1,null,"4eb1ba35",null)),X=Q.exports,Y={created:function(){var t=JSON.parse(localStorage.getItem("addedItems"))||{};this.$store.commit("setCounterMap",t)},components:{GoodsCard:X},computed:Object(v["a"])({},Object(b["d"])(["goodsList"])),data:function(){return{type:"all",loading:!1,finished:!1,isLoading:!1,page:1,id:G()}},methods:Object(v["a"])(Object(v["a"])(Object(v["a"])({},Object(b["c"])(["resetGoodsList"])),Object(b["b"])(["getGoodsList"])),{},{onRefresh:function(){this.loading=!1,this.finished=!1,this.isLoading=!0,this.page=1,this.resetGoodsList(),this.getGoodsList({page:1,sort:this.type}),this.isLoading=!1},onLoad:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.page+=1,t.loading=!0,e.next=4,t.getGoodsList({page:t.page,sort:t.type});case 4:s=e.sent,s?t.loading=!1:t.finished=!0;case 6:case"end":return e.stop()}}),e)})))()},changeType:function(t){"all"===t||"sale"===t?this.type=t:"price-up"===this.type?this.type="price-down":this.type="price-up",this.onRefresh()}})},Z=Y,tt=(s("a108"),Object(d["a"])(Z,J,D,!1,null,"5ba096af",null)),et=tt.exports,st={computed:Object(v["a"])({},Object(b["d"])(["showContent"])),components:{OneTab:E,SideTab:A,GoodsList:et}},it=st,nt=(s("ffc5"),Object(d["a"])(it,O,k,!1,null,"d8dafce6",null)),at=nt.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shopping-wrapper"},[s("div",{staticClass:"shopping-header van-hairline--bottom"},[s("h3",[t._v("购物车")]),s("span",{on:{touchend:function(e){return e.preventDefault(),t.clearCar(e)}}},[t._v("删除")])]),s("div",{staticClass:"shopping-content"},[t._l(t.goodsList,(function(e){return s("div",{key:e._id,staticClass:"shopping-prod"},[e.id in t.addedProdItem?s("van-checkbox-group",{staticClass:"item van-hairline--bottom",model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}},[s("van-checkbox",{staticClass:"checkbox-item",attrs:{name:e.id}}),s("GoodsCard",t._b({staticClass:"goods-card",attrs:{typePage:"shopping"},on:{isRemove:t.removeProd}},"GoodsCard",e,!1))],1):t._e()],1)})),Object.keys(t.addedProdItem).length<=0?s("div",{staticClass:"card-none"},[s("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/shopping_bg.jpg"}})]):t._e()],2),s("div",{staticClass:"shopping-bar van-hairline--surround"},[s("van-checkbox",{staticClass:"select-all",model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}},[t._v(" 全选 ")]),s("div",{staticClass:"total-price"},[t._v(" 合计："),s("span",[t._v("￥")]),s("span",{staticClass:"num"},[t._v(t._s(Math.floor(t.totalPrice))+".")]),s("span",[t._v(t._s(t.totalPrice.toFixed(2).substr(-2)))])]),s("van-button",{staticClass:"buy",attrs:{type:"primary"}},[t._v("去结算("+t._s(t.carNum?t.carNum:0)+")")])],1),s("van-popup",{staticClass:"pop-wrapper",style:{height:"20%",width:"80%"},attrs:{closeable:"",position:"center","close-icon":"close",round:!0,duration:"0.2"},on:{"click-close-icon":t.cancel,"click-overlay":t.cancel},model:{value:t.isShowModel,callback:function(e){t.isShowModel=e},expression:"isShowModel"}},[s("span",{staticClass:"tip-info"},[t._v(t._s(t.tipInfo))]),s("div",{staticClass:"pop-model"},[s("van-button",{attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")]),s("van-button",{attrs:{type:"info"},on:{click:t.confirm}},[t._v("确认")])],1)])],1)},rt=[],ct=(s("4de4"),s("4160"),s("caad"),s("a434"),s("b64b"),s("2532"),s("159b"),s("2909")),dt=(s("ac1f"),s("841c"),s("bc3a")),ut=s.n(dt),lt="https://mallapi.duyiedu.com/goods/",ht={getSide:"/getsidebar",getGoodsList:"/getGoodsList",likeSearch:"/likeSearch",search:"/search",getGoodsByIds:"/getGoodsByIds"},pt=lt,mt="anonym_1608299893038",gt=ut.a.create({baseURL:pt,params:{appkey:mt}});gt.interceptors.response.use((function(t){return t.data}));var ft=function(t){return gt.get(ht.getSide,{params:{type:t}})},vt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,i=arguments.length>3?arguments[3]:void 0;return gt.get(ht.getGoodsList,{params:{type:t,page:e,size:s,sort:i}})},bt=function(t){return gt.get(ht.likeSearch,{params:{likeValue:t}})},yt=function(t,e,s){return gt.get(ht.search,{params:{type:t,page:e,size:s}})},Lt=function(t){return gt.get(ht.getGoodsByIds,{params:{value:t}})},jt={getSideList:ft,getGoodsList:vt,likeSearch:bt,search:yt,getGoodsByIds:Lt},_t=jt,Ct={data:function(){return{goodsList:[],selectedItems:[],isShowModel:!1,isRemove:!1,removeProdId:null,isClearCar:!1,tipInfo:"是否删除此商品"}},methods:{cancel:function(){var t=this;this.isShowModel=!1,this.isRemove=!1,this.isClearCar&&setTimeout((function(){t.tipInfo="是否删除此商品"}),300)},clearCar:function(){this.isShowModel=!0,this.tipInfo="是否清空购物车",this.isClearCar=!0},confirm:function(){this.isClearCar?(this.goodsList=[],this.selectedItems=[],this.$store.dispatch("removeAddedProdItem"),this.isClearCar=!1):this.isRemove=!0,this.isShowModel=!1},removeProd:function(t){this.isShowModel=!0,this.removeProdId=t}},watch:{isRemove:function(){var t=this;this.isRemove&&this.removeProdId&&(this.$store.dispatch("setAddedProdItem",{id:this.removeProdId,value:-1}),this.selectedItems.forEach((function(e,s){e===t.removeProdId&&t.selectedItems.splice(s,1)})),this.goodsList=this.goodsList.filter((function(e){return e.id!==t.removeProdId})),this.isRemove=!1)}},computed:Object(v["a"])(Object(v["a"])({},Object(b["d"])(["addedProdItem"])),{},{carNum:function(){var t=this,e=0;return Object.values(this.addedProdItem).length>0&&this.selectedItems.forEach((function(s){t.addedProdItem[s]&&(e+=t.addedProdItem[s])})),e},totalPrice:function(){var t=this,e=0;return this.selectedItems.forEach((function(s){t.goodsList.forEach((function(i){+i.id===s&&t.addedProdItem[s]&&(e+=t.addedProdItem[s]*t.goodsList.filter((function(t){return+t.id===s}))[0].price)}))})),e},selectAll:{get:function(){return Object.keys(this.addedProdItem).length===this.selectedItems.length},set:function(t){if(t){for(var e in this.addedProdItem)this.selectedItems.includes(+e)||this.selectedItems.push(+e);return!0}return this.selectedItems=[],!1}}}),components:{GoodsCard:X},created:function(){var t=this,e=[],s=Object.keys(this.addedProdItem);s.length>0&&(s.forEach(function(){var s=Object(F["a"])(regeneratorRuntime.mark((function s(i){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,_t.getGoodsByIds(i);case 2:n=s.sent,a=n.list,e.push.apply(e,Object(ct["a"])(a)),t.selectedItems.push(+i);case 6:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}()),this.goodsList=e)}},wt=Ct,St=(s("04c5"),Object(d["a"])(wt,ot,rt,!1,null,"5ecbff10",null)),It=St.exports,Ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-wrapper"},[s("div",{staticClass:"search-header"},[s("van-icon",{staticClass:"arrow-left",attrs:{name:"arrow-left"},on:{touchend:function(e){return e.preventDefault(),t.$router.push("/home/classify")}}}),s("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{input:t.onInput,search:t.onSearch,focus:t.onFocus},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),!0!==t.showList?s("van-button",{staticClass:"search-btn",attrs:{plain:"",type:"info"},on:{click:t.onSearch}},[t._v("搜索")]):s("van-icon",{staticClass:"search-car",attrs:{name:"shopping-cart-o",badge:t.carNum?t.carNum:0},on:{click:function(e){return t.$router.push("/home/shopping")}}})],1),s("div",{staticClass:"search-content"},[s("SearchHistory",{attrs:{showList:t.showList,isSearch:t.isSearch,goodsList:t.goodsList,isHasSearchResult:t.isHasSearchResult,value:t.value,likeList:t.likeList,searchList:t.searchList,isLoading:t.isLoading},on:{changeProps:t.changeProps,saveSearchList:t.saveSearchList}})],1)])},kt=[],Pt=(s("498a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-wrapper"},[!0!==t.isSearch?s("div",{staticClass:"search-history"},[s("dl",{staticClass:"clear-fix"},[s("dt",[t._v("历史记录")]),t._l(t.searchList,(function(e){return s("dd",{key:e.time,on:{touchend:function(s){return t.delay(e.value,"searchType")}}},[t._v(" "+t._s(e.value)+" ")])}))],2),void 0===t.searchList.length||t.searchList.length<=0?s("span",{staticClass:"tip-history"},[t._v("还没有历史记录，快去搜索吧")]):t._e(),t.searchList.length>0?s("span",{staticClass:"clear-search-history",on:{touchend:t.clearHistory}},[t._v("清除历史记录")]):t._e()]):!0!==t.showList&&!1===t.isLoading?s("ul",t._l(t.likeList,(function(e){return s("li",{key:e,staticClass:"van-hairline--bottom",on:{touchend:function(s){return t.delay(e,"searchType")}}},t._l(e,(function(e){return s("span",{key:e,class:{"target-color":t.value.includes(e)}},[t._v(t._s(e))])})),0)})),0):s("div",{staticClass:"search-list"},[!0===t.isHasSearchResult&&!1===t.isLoading?t._l(t.goodsList,(function(e){return s("GoodsCard",t._b({key:e.id+t.id},"GoodsCard",e,!1))})):!1===t.isHasSearchResult&&!0!==t.isLoading?s("span",[t._v("没有了")]):t._e()],2),t.isLoading?s("van-loading",{attrs:{color:"#1989fa",size:"1rem",vertical:""}}):t._e()],1)}),Rt=[],xt={data:function(){return{page:1,size:5,id:G()}},props:["showList","isSearch","goodsList","isHasSearchResult","value","searchList","likeList","isLoading"],methods:{delay:function(t,e){var s=this;console.log(t),this.$emit("changeProps",{isLoading:!0}),setTimeout((function(){s[e](t),s.$emit("changeProps",{isLoading:!1})}),300)},searchType:function(t){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function s(){var i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.$emit("changeProps",{showList:!0,isSearch:!0}),e.$emit("changeProps",{value:t}),s.next=4,_t.search(t,e.page,e.size);case 4:i=s.sent,n=i.list,e.$emit("changeProps",{goodsList:n}),0!==n.length&&e.$emit("changeProps",{isHasSearchResult:!0}),e.$emit("saveSearchList",t);case 9:case"end":return s.stop()}}),s)})))()},clearHistory:function(){this.$emit("changeProps",{searchList:[]}),localStorage.removeItem("search-list")}},components:{GoodsCard:X}},Gt=xt,Tt=(s("47c2"),Object(d["a"])(Gt,Pt,Rt,!1,null,"7cd15b8e",null)),$t=Tt.exports,Ut={computed:Object(v["a"])(Object(v["a"])({},Object(b["d"])(["addedProdItem"])),{},{carNum:function(){if(Object.values(this.addedProdItem).length>0)return Object.values(this.addedProdItem).reduce((function(t,e){return t+e>99?"99+":t+e}))}}),components:{SearchHistory:$t},data:function(){return{timer:null,value:"",page:1,size:5,searchList:[],isSearch:!1,showList:!1,likeList:[],goodsList:[],isHasSearchResult:!1,isLoading:!1}},methods:{changeProps:function(t){var e=this,s=Object.keys(t);s.forEach((function(s){e[s]=t[s]}))},onSearch:function(){var t=this,e=this.value.trim();e&&(this.isSearch=!0,this.isLoading=!0,setTimeout(Object(F["a"])(regeneratorRuntime.mark((function s(){var i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.showList=!0,t.isLoading=!0,t.goodsList=[],s.next=5,_t.likeSearch(e);case 5:i=s.sent,n=i.result,n.forEach(function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(s){var i,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_t.search(s,t.page,t.size);case 2:n=e.sent,a=n.list,(i=t.goodsList).push.apply(i,Object(ct["a"])(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),0!==n.length?t.isHasSearchResult=!0:t.isHasSearchResult=!1,t.isLoading=!1,t.saveSearchList(e);case 11:case"end":return s.stop()}}),s)}))),310))},onInput:function(){var t=this;this.value.trim()||(this.isSearch=!1),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(Object(F["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.value.trim()){e.next=9;break}return e.next=3,_t.likeSearch(t.value);case 3:s=e.sent,i=s.result,0!==i.length&&(t.isSearch=!0,t.showList=!1),t.likeList=i,clearTimeout(t.timer),t.timer=null;case 9:case"end":return e.stop()}}),e)}))),300)},onFocus:function(){this.searchList=JSON.parse(localStorage.getItem("search-list"))||{},this.isSearch=!1,this.showList=!1},saveSearchList:function(t){var e=Date.now();this.$store.dispatch("saveSearchHistory",{time:e,value:t})}},created:function(){this.searchList=JSON.parse(localStorage.getItem("search-list"))||{}}},Et=Ut,Mt=(s("5513"),Object(d["a"])(Et,Ot,kt,!1,null,"7dbd005a",null)),Ht=Mt.exports,Nt=[{path:"/home",redirect:"/home/classify",component:I,children:[{path:"classify",component:at},{path:"shopping",component:It}]},{path:"/search",component:Ht},{path:"*",redirect:"/home/classify"}],zt=Nt;i["a"].use(h["a"]);var Bt=new h["a"]({mode:"history",base:"/",routes:zt}),At=Bt;s("99af");i["a"].use(b["a"]);var Jt=new b["a"].Store({state:{sideList:[],showContent:!0,goodsList:[],size:5,type:null,addedProdItem:{},isSearch:!1,searchList:[],prodId:null},mutations:{setIsSearch:function(t,e){t.isSearch=e},setSideList:function(t,e){t.sideList=e},setShowContent:function(t,e){t.showContent=e},setGoodsList:function(t,e){t.goodsList=[].concat(Object(ct["a"])(t.goodsList),Object(ct["a"])(e))},setGoodsType:function(t,e){t.type=e},resetGoodsList:function(t){t.goodsList=[]},setCounterMap:function(t,e){t.addedProdItem=e},setSearchList:function(t,e){t.searchList=[e].concat(Object(ct["a"])(t.searchList))}},actions:{getSideList:function(t,e){return Object(F["a"])(regeneratorRuntime.mark((function s(){var i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.commit,i("setShowContent",!1),s.next=4,_t.getSideList(e);case 4:n=s.sent,i("setSideList",n),i("setShowContent",!0);case 7:case"end":return s.stop()}}),s)})))()},getGoodsList:function(t,e){return Object(F["a"])(regeneratorRuntime.mark((function s(){var i,n,a,o,r,c,d,u;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.commit,n=t.state,a=e.page,o=e.sort,r=e.type||n.type,i("setGoodsType",r),s.next=6,_t.getGoodsList(r,a,n.size,o);case 6:if(c=s.sent,d=c.list,u=c.total,i("setGoodsList",d),!(u>n.goodsList.length)){s.next=12;break}return s.abrupt("return",!0);case 12:return s.abrupt("return",!1);case 13:case"end":return s.stop()}}),s)})))()},setAddedProdItem:function(t,e){var s=t.state,n=e.id,a=e.value;s.addedProdItem[n]?-1===a&&1===s.addedProdItem[n]?i["a"].delete(s.addedProdItem,n):i["a"].set(s.addedProdItem,n,s.addedProdItem[n]+a):i["a"].set(s.addedProdItem,n,1),localStorage.setItem("addedItems",JSON.stringify(s.addedProdItem))},saveSearchHistory:function(t,e){var s=t.commit,i=t.state,n=e.time,a=e.value;i.searchList.filter((function(t,e){t.value===a&&i.searchList.splice(e,1)})),s("setSearchList",{time:n,value:a}),localStorage.setItem("search-list",JSON.stringify(i.searchList))},removeAddedProdItem:function(t){var e=t.state;e.addedProdItem={},localStorage.removeItem("addedItems")}},modules:{}});s("499a"),s("157a");i["a"].config.productionTip=!1,i["a"].use(n["a"]),new i["a"]({router:At,store:Jt,render:function(t){return t(l)}}).$mount("#app")},6356:function(t,e,s){},"6b71":function(t,e,s){},"74c7":function(t,e,s){"use strict";s("d407")},"7c55":function(t,e,s){"use strict";s("2395")},"88af":function(t,e,s){},9050:function(t,e,s){},"942b":function(t,e,s){"use strict";s("2145")},a108:function(t,e,s){"use strict";s("6356")},d407:function(t,e,s){},edc2:function(t,e,s){"use strict";s("88af")},ffc5:function(t,e,s){"use strict";s("6b71")}});
//# sourceMappingURL=app.0407c1e3.js.map